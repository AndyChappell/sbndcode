# Produced from 'fhicl-dump' using:
#   Input  : detsim_comm_sbnd.fcl
#   Policy : cet::filepath_maker
#   Path   : "FHICL_FILE_PATH"

outputs: {
   out1: {
      compressionLevel: 1
      dataTier: "simulated"
      fileName: "%ifb_%p-%tc.root"
      module_type: "RootOutput"
      saveMemoryObjectThreshold: 0
   }
}
physics: {
   end_paths: [
      "stream1"
   ]
   producers: {
      crt: {
         ADCThreshold: 60
         FEBDataProducer: "crtsim"
         module_type: "CRTSlimmer"
      }
      crtsim: {
         DetSimParams: {
            AbsLenEff: 8.5
            AdcSaturation: 4095
            ClockSpeedCRT: 1000
            DeadTime: 22000
            DebugTrigger: false
            DoWaveformEmulation: true
            GlobalT0Offset: 0
            NpeScaleNorm: 8.023e7
            NpeScaleShift: -1085
            PropDelay: 6.1e-2
            PropDelayError: 7e-3
            Q0: 1.75e-3
            QPed: 0
            QRMS: 80
            QSlope: 40
            QThreshold: 60
            SipmTimeResponse: 2
            StripCoincidenceWindow: 100
            TDelayNorm: 4.12574e3
            TDelayOffset: -1.525
            TDelayRMSExpNorm: 1.6544
            TDelayRMSExpScale: 7.93543e1
            TDelayRMSExpShift: 7.56183e1
            TDelayRMSGausNorm: 2.09138
            TDelayRMSGausShift: 7.23993
            TDelayRMSGausSigma: 1.70027e2
            TDelayShift: -3.0031e2
            TDelaySigma: 9.0392e1
            TResInterpolator: 1.268
            TaggerPlaneCoincidenceWindow: 150
            TriggerDelay: 10
            UseEdep: true
            UseG4RefTimeOffset: true
            WaveformX: [
               0,
               1.183e1,
               1.859e1,
               2.872e1,
               4.14e1,
               5.153e1,
               6.251e1,
               75
            ]
            WaveformY: [
               0,
               3.412,
               1.208e1,
               3.4138e1,
               6.5646e1,
               8.4554e1,
               1.011e2,
               1.083e2
            ]
         }
         G4ModuleLabel: "genericcrt"
         module_type: "sbndcode/CRT/CRTDetSim"
      }
      daq: {
         BaselineRMS: 0
         CollectionPed: 650
         CollectionSat: 2922
         CompressionType: "none"
         DriftEModuleLabel: "simdrift"
         GenNoise: true
         InductionPed: 2000
         InductionSat: 1247
         TrigModName: "triggersim"
         module_type: "SimWireSBND"
      }
      opdaq: {
         AllowTriggerOverlap: true
         AmpFluctuation: 9.9e-2
         ApplyTriggers: false
         ArapucaBaseline: 1500
         ArapucaBaselineRMS: 2.6
         ArapucaDarkNoiseRate: 10
         ArapucaDataFile: "OpDetSim/digi_arapuca_sbnd.root"
         ArapucaFallTime: 476
         ArapucaMeanAmplitude: 1.2e-1
         ArapucaPeakTime: 260
         ArapucaPulseLength: 4000
         ArapucaRiseTime: 9
         ArapucaSaturation: 300
         ArapucaSinglePEmodel: true
         ArapucaVISEff: 1.89e-2
         ArapucaVUVEff: 1.4e-2
         ArapucaVoltageToADC: 1.515e2
         BeamTriggerEnable: true
         BeamTriggerHoldoff: 0
         BeamTriggerTime: 0
         CableTime: 135
         CrossTalk: 2e-1
         DaphneFrequency: 80
         DecayTXArapucaVIS: 8.5
         DriftPeriod: 1300
         GainFluctuationsParams: {
            DynodeK: 7.5e-1
            Gain: 1e7
            VoltageDistribution: [
               1.74e1,
               3.4,
               5,
               3.33,
               1.67,
               1,
               1.2,
               1.5,
               2.2,
               3
            ]
            tool_type: "PMTGainFluctuations1Dynode"
         }
         InputModule: "PDFastSim"
         MakeAmpFluctuations: true
         MakeGainFluctuations: true
         PMTBaseline: 8000
         PMTBaselineRMS: 1
         PMTChargeToADC: -1.11927e1
         PMTDarkNoiseRate: 1000
         PMTDataFile: "OpDetSim/digi_pmt_sbnd.root"
         PMTFallTime: 1.37e1
         PMTMeanAmplitude: 9e-1
         PMTRiseTime: 3.8
         PMTSaturation: 300
         PMTSinglePEmodel: false
         PulsePolarityArapuca: 1
         PulsePolarityPMT: -1
         QEDirect: 3e-2
         QERefl: 3e-2
         ReadoutWindowPostTrigger: 11
         ReadoutWindowPostTriggerBeam: 11
         ReadoutWindowPreTrigger: 1
         ReadoutWindowPreTriggerBeam: 1
         TTS: 2.4
         TransitTime: 5.51e1
         TriggerEnableWindowOneDriftBeforeTPCReadout: true
         TriggerHoldoff: 0
         TriggerThresholdADCArapuca: 17
         TriggerThresholdADCPMT: 9
         UseSimPhotonsLite: true
         WaveformSize: 2000
         XArapucaVISEff: 1.4e-2
         XArapucaVUVEff: 2.1e-2
         module_type: "opDetDigitizerSBND"
      }
      rns: {
         module_type: "RandomNumberSaver"
      }
   }
   simulate: [
      "rns",
      "daq",
      "crtsim",
      "crt",
      "opdaq"
   ]
   stream1: [
      "out1"
   ]
}
process_name: "DetSim"
services: {
   AuxDetExptGeoHelperInterface: {
      service_provider: "sbndcode/CRT/CRTGeometryHelper"
   }
   AuxDetGeometry: {
      GDML: "sbnd_v02_00.gdml"
      Name: "sbndv2"
      ROOT: "sbnd_v02_00.gdml"
   }
   ChannelStatusService: {
      BadChannels: [
         4802,
         4803,
         4804,
         4805,
         4806,
         4807,
         10440,
         10441,
         10442,
         10443,
         10444,
         10445,
         4399,
         5221,
         10037,
         10859,
         0,
         1,
         2,
         1983,
         1984,
         1985,
         1986,
         1987,
         1988,
         3969,
         3970,
         3971,
         5638,
         5639,
         5640,
         7621,
         7622,
         7623,
         7624,
         7625,
         7626,
         9607,
         9608,
         9609
      ]
      NoisyChannels: []
      service_provider: "SimpleChannelStatusService"
   }
   DetPedestalService: {
      DetPedestalRetrievalAlg: {
         AlgName: "DetPedestalRetrievalAlg"
         DatabaseRetrievalAlg: {
            AlgName: "DatabaseRetrievalAlg"
            DBFolderName: ""
            DBTag: ""
            DBUrl: ""
         }
         DefaultCollMean: 650
         DefaultCollRms: 3e-1
         DefaultIndMean: 2000
         DefaultIndRms: 3e-1
         DefaultMeanErr: 0
         DefaultRmsErr: 0
         UseDB: false
         UseFile: false
      }
      service_provider: "SIOVDetPedestalService"
   }
   DetectorClocksService: {
      ClockSpeedExternal: 3.125e1
      ClockSpeedOptical: 500
      ClockSpeedTPC: 2
      ClockSpeedTrigger: 16
      DefaultBeamTime: 1700
      DefaultTrigTime: 1700
      FramePeriod: 1300
      G4RefTime: -1700
      InheritClockConfig: true
      TrigModuleName: "triggersim"
      TriggerOffsetTPC: -200
      service_provider: "DetectorClocksServiceStandard"
   }
   DetectorPropertiesService: {
      DriftVelFudgeFactor: 1
      Efield: [
         5e-1,
         6.66e-1,
         8e-1
      ]
      Electronlifetime: 10000
      ElectronsToADC: 6.29778e-3
      IncludeInterPlanePitchInXTickOffsets: true
      InheritNumberTimeSamples: false
      NumberTimeSamples: 3400
      ReadOutWindowSize: 3400
      SimpleBoundaryProcess: true
      SternheimerA: 1.956e-1
      SternheimerCbar: 5.2146
      SternheimerK: 3
      SternheimerX0: 2e-1
      SternheimerX1: 3
      Temperature: 8.84e1
      TimeOffsetU: 0
      TimeOffsetV: 0
      TimeOffsetZ: 0
      UseIcarusMicrobooneDriftModel: false
      service_provider: "DetectorPropertiesServiceStandard"
   }
   ExptGeoHelperInterface: {
      service_provider: "SBNDGeometryHelper"
   }
   FileCatalogMetadata: {
      applicationFamily: "art"
      applicationVersion: "development"
      fileType: "mc"
      group: "sbnd"
      runType: "physics"
   }
   Geometry: {
      DisableWiresInG4: true
      GDML: "sbnd_v02_00.gdml"
      Name: "sbndv2"
      ROOT: "sbnd_v02_00.gdml"
      SortingParameters: {
         DetectorVersion: "sbnd"
      }
      SurfaceY: 0
   }
   GeometryConfigurationWriter: {}
   LArFFT: {
      FFTOption: ""
      FFTSize: 0
      FitBins: 20
   }
   LArPropertiesService: {
      AbsLengthEnergies: [
         4,
         5,
         6,
         7,
         8,
         9,
         10,
         11
      ]
      AbsLengthSpectrum: [
         2000,
         2000,
         2000,
         2000,
         2000,
         2000,
         2000,
         2000
      ]
      AlphaScintYield: 16800
      AlphaScintYieldRatio: 5.6e-1
      Argon39DecayRate: 0
      AtomicMass: 3.9948e1
      AtomicNumber: 18
      ElectronScintYield: 20000
      ElectronScintYieldRatio: 2.7e-1
      EnableCerenkovLight: false
      ExcitationEnergy: 188
      FastScintEnergies: [
         7.2,
         7.9,
         8.3,
         8.6,
         8.9,
         9.1,
         9.3,
         9.6,
         9.7,
         9.8,
         10,
         1.02e1,
         1.03e1,
         1.06e1,
         11,
         1.16e1,
         1.19e1
      ]
      FastScintSpectrum: [
         0,
         4e-2,
         1.2e-1,
         2.7e-1,
         4.4e-1,
         6.2e-1,
         8e-1,
         9.1e-1,
         9.2e-1,
         8.5e-1,
         7e-1,
         5e-1,
         3.1e-1,
         1.3e-1,
         4e-2,
         1e-2,
         0
      ]
      KaonScintYield: 24000
      KaonScintYieldRatio: 2.3e-1
      LoadExtraMatProperties: true
      MuonScintYield: 24000
      MuonScintYieldRatio: 2.3e-1
      PionScintYield: 24000
      PionScintYieldRatio: 2.3e-1
      ProtonScintYield: 19200
      ProtonScintYieldRatio: 2.9e-1
      RIndexEnergies: [
         1.18626,
         1.68626,
         2.18626,
         2.68626,
         3.18626,
         3.68626,
         4.18626,
         4.68626,
         5.18626,
         5.68626,
         6.18626,
         6.68626,
         7.18626,
         7.68626,
         8.18626,
         8.68626,
         9.18626,
         9.68626,
         1.01863e1,
         1.06863e1,
         1.11863e1
      ]
      RIndexSpectrum: [
         1.24664,
         1.2205,
         1.22694,
         1.22932,
         1.23124,
         1.23322,
         1.23545,
         1.23806,
         1.24116,
         1.24489,
         1.24942,
         1.25499,
         1.26197,
         1.2709,
         1.28263,
         1.29865,
         1.32169,
         1.35747,
         1.42039,
         1.56011,
         2.16626
      ]
      RadiationLength: 1.955e1
      RayleighEnergies: [
         1.18626,
         1.68626,
         2.18626,
         2.68626,
         3.18626,
         3.68626,
         4.18626,
         4.68626,
         5.18626,
         5.68626,
         6.18626,
         6.68626,
         7.18626,
         7.68626,
         8.18626,
         8.68626,
         9.18626,
         9.68626,
         1.01863e1,
         1.06863e1,
         1.11863e1
      ]
      RayleighSpectrum: [
         1.2008e6,
         390747,
         128633,
         5.49691e4,
         2.71918e4,
         1.48537e4,
         8.7169e3,
         5.39742e3,
         3.48137e3,
         2.31651e3,
         1.57763e3,
         1.09202e3,
         7.63045e2,
         5.34232e2,
         3.71335e2,
         2.52942e2,
         1.6538e2,
         9.99003e1,
         5.12653e1,
         1.7495e1,
         9.64341e-1
      ]
      ReflectiveSurfaceDiffuseFractions: [
         [
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
         ],
         [
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
         ],
         [
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
         ],
         [
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
         ],
         [
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
         ]
      ]
      ReflectiveSurfaceEnergies: [
         1.77,
         2.0675,
         2.481,
         2.819,
         2.953,
         3.1807,
         3.54,
         4.135,
         4.962,
         5.39,
         7,
         15
      ]
      ReflectiveSurfaceNames: [
         "STEEL_STAINLESS_Fe7Cr2Ni",
         "Copper_Beryllium_alloy25",
         "G10",
         "vm2000",
         "ALUMINUM_Al"
      ]
      ReflectiveSurfaceReflectances: [
         [
            6.6e-1,
            6.4e-1,
            6.2e-1,
            6e-1,
            5.9e-1,
            5.7e-1,
            5.3e-1,
            4.7e-1,
            3.9e-1,
            3.6e-1,
            2.7e-1,
            2.5e-1
         ],
         [
            9.02e-1,
            8.41e-1,
            4.64e-1,
            3.79e-1,
            3.45e-1,
            2.99e-1,
            2.87e-1,
            2.64e-1,
            3.37e-1,
            3e-1,
            0,
            0
         ],
         [
            3.93e-1,
            4.05e-1,
            4.04e-1,
            3.52e-1,
            3.23e-1,
            2.43e-1,
            1.27e-1,
            6.5e-2,
            6.8e-2,
            6.8e-2,
            0,
            0
         ],
         [
            9.3e-1,
            9.3e-1,
            9.3e-1,
            9.3e-1,
            9.3e-1,
            9.3e-1,
            1e-1,
            1e-1,
            7e-1,
            3e-1,
            0,
            0
         ],
         [
            9e-1,
            9e-1,
            9e-1,
            9e-1,
            9e-1,
            9e-1,
            9e-1,
            4.7e-1,
            3.9e-1,
            3.6e-1,
            2.7e-1,
            2.5e-1
         ]
      ]
      ScintBirksConstant: 6.9e-2
      ScintByParticleType: true
      ScintFastTimeConst: 6
      ScintPreScale: 3e-2
      ScintResolutionScale: 1
      ScintSlowTimeConst: 1300
      ScintYield: 24000
      ScintYieldRatio: 3e-1
      SlowScintEnergies: [
         7.2,
         7.9,
         8.3,
         8.6,
         8.9,
         9.1,
         9.3,
         9.6,
         9.7,
         9.8,
         10,
         1.02e1,
         1.03e1,
         1.06e1,
         11,
         1.16e1,
         1.19e1
      ]
      SlowScintSpectrum: [
         0,
         4e-2,
         1.2e-1,
         2.7e-1,
         4.4e-1,
         6.2e-1,
         8e-1,
         9.1e-1,
         9.2e-1,
         8.5e-1,
         7e-1,
         5e-1,
         3.1e-1,
         1.3e-1,
         4e-2,
         1e-2,
         0
      ]
      TpbAbsorptionEnergies: [
         5e-2,
         1.77,
         2.0675,
         7.42,
         7.75,
         8.16,
         8.73,
         9.78,
         1.069e1,
         5.039e1
      ]
      TpbAbsorptionSpectrum: [
         100000,
         100000,
         100000,
         1e-3,
         1e-11,
         1e-11,
         1e-11,
         1e-11,
         1e-11,
         1e-11
      ]
      TpbEmmisionEnergies: [
         5e-2,
         1,
         1.5,
         2.25,
         2.481,
         2.819,
         2.952,
         2.988,
         3.024,
         3.1,
         3.14,
         3.1807,
         3.54,
         5.5,
         5.039e1
      ]
      TpbEmmisionSpectrum: [
         0,
         0,
         0,
         5.88e-2,
         2.35e-1,
         8.53e-1,
         1,
         1,
         9.259e-1,
         7.04e-1,
         2.96e-2,
         1.1e-2,
         0,
         0,
         0
      ]
      TpbTimeConstant: 0
      service_provider: "LArPropertiesServiceStandard"
   }
   MemoryTracker: {
      dbOutput: {
         filename: "memory.db"
         overwrite: true
      }
   }
   NoiseModel: {
      CohExpNorm: 3.67206
      CohExpOffset: 2.32098e-1
      CohExpWidth: 3.39581
      CohGausMean: [
         3.55622e1,
         6.63823e-2,
         1.162e2,
         1.739e2,
         2.898e2
      ]
      CohGausNorm: [
         6.88535,
         5.21692e-1,
         2.00001,
         2.0363,
         2.00003
      ]
      CohGausSigma: [
         1.75992e1,
         3.16607e2,
         3.68024e-1,
         3.26335e-1,
         5.1472e-2
      ]
      CohNoiseArrayPoints: 1000
      EffectiveNBits: 1.06e1
      EnableCoherentNoise: false
      EnableGaussianNoise: false
      EnableMicroBooNoise: true
      EnableWhiteNoise: false
      GausMeanU: [
         630,
         640,
         730
      ]
      GausMeanV: [
         130,
         330,
         430
      ]
      GausMeanZ: [
         34
      ]
      GausNormU: [
         30,
         -3,
         15
      ]
      GausNormV: [
         30,
         40,
         15
      ]
      GausNormZ: [
         3
      ]
      GausSigmaU: [
         5e-1,
         5e-1,
         5e-1
      ]
      GausSigmaV: [
         5e-1,
         2,
         5e-1
      ]
      GausSigmaZ: [
         5
      ]
      IncludeJumpers: false
      JumperCapacitance: 5
      LogLevel: 0
      NChannelsPerCoherentGroup: [
         40,
         40,
         48
      ]
      NoiseArrayPoints: 1000
      NoiseFunctionParameters: [
         1.19777e1,
         170000,
         4.93692e3,
         1.03438e3,
         2.33306e2,
         1.36605,
         4.08741,
         3.5e-3,
         9596
      ]
      UFirstJumper: 420
      ULastJumper: 1568
      VFirstJumper: 417
      VLastJumper: 1565
      WhiteNoiseU: 1.6
      WhiteNoiseV: 1.6
      WhiteNoiseZ: 1.6
      service_provider: "SBNDuBooNEDataDrivenNoiseService"
   }
   NuRandomService: {
      endOfJobSummary: true
      policy: "random"
   }
   OpDetResponseInterface: {
      QuantumEfficiency: 1
      WavelengthCutHigh: 10000
      WavelengthCutLow: 0
      service_provider: "MicrobooneOpDetResponse"
   }
   RandomNumberGenerator: {}
   SignalShapingServiceSBND: {
      ADCPerPCAtLowestASICGain: 10696
      ADCTicksPerPCAtLowestASICGainSetting: 10696
      ASICGainInMVPerFC: [
         14,
         14,
         14
      ]
      Col3DCorrection: 2.5
      ColFieldParams: [
         8,
         16,
         7.5e-1
      ]
      ColFieldRespAmp: 1
      ColFieldShape: "x^[2]/(1.0+(x/[0])^[1])"
      ColFilter: "(x>0)*gaus"
      ColFilterParams: [
         1,
         0,
         2e-1
      ]
      DeconNorm: 50
      FieldBins: 1000
      FieldResponseFname: "Response/sbnd_response_v1.0.root"
      FieldResponseHistoName: "FieldResponse"
      FieldResponseTOffset: [
         -26600,
         -26600,
         -26600
      ]
      FilterFunctionFname: "sbnd_filters_v0.1.root"
      FilterHistoName: "noisefilter_%d"
      GetFilterFromHisto: false
      Ind3DCorrection: 1.5
      IndUFieldParams: [
         8.43e-3,
         1.534e-1,
         1.77,
         0,
         5e-1
      ]
      IndUFieldRespAmp: 1
      IndUFieldShape: "[0]*(1.0+[3]*tanh(x-[4]))*([4]-x)*exp(-0.5*((x-[4])/[2])^2.0)"
      IndUFilter: "(x>0)*gaus"
      IndUFilterParams: [
         1,
         0,
         2e-1
      ]
      IndVFieldParams: [
         8.43e-3,
         1.534e-1,
         1.77,
         0,
         5e-1
      ]
      IndVFieldRespAmp: 1
      IndVFieldShape: "[0]*(1.0+[3]*tanh(x-[4]))*([4]-x)*exp(-0.5*((x-[4])/[2])^2.0)"
      IndVFilter: "(x>0)*gaus"
      IndVFilterParams: [
         1,
         0,
         2e-1
      ]
      InputFieldRespSamplingPeriod: 30
      NoiseFactVec: [
         [
            8.23e-1,
            8.23e-1,
            8.23e-1,
            8.23e-1
         ],
         [
            8.23e-1,
            8.23e-1,
            8.23e-1,
            8.23e-1
         ],
         [
            6.51e-1,
            6.51e-1,
            6.51e-1,
            6.51e-1
         ]
      ]
      ShapeTimeConst: [
         2,
         2,
         2
      ]
      UseFunctionFieldShape: false
      UseHistogramFieldShape: true
      UseSimpleFieldShape: false
   }
   SpaceCharge: {
      CalibrationInputFilename: "SCEoffsets.root"
      EnableCalEfieldSCE: false
      EnableCalSpatialSCE: false
      EnableCorrSCE: false
      EnableSimEfield: false
      EnableSimEfieldSCE: false
      EnableSimSpatialSCE: false
      InputFilename: "SCEoffsets/SCEoffsets_SBND_E500_voxelTH3.root"
      RepresentationType: "Voxelized_TH3"
      service_provider: "SpaceChargeServiceSBND"
   }
   TFileService: {
      fileName: "hists_%ifb_%p-%tc.root"
   }
   TimeTracker: {
      dbOutput: {
         filename: "cputime.db"
         overwrite: true
      }
      printSummary: true
   }
   message: {
      destinations: {
         LogErrorFile: {
            append: false
            categories: {
               default: {}
}
            filename: "errors.log"
            threshold: "ERROR"
            type: "file"
}
         LogInfoFile: {
            append: false
            categories: {
               default: {}
}
            filename: "messages.log"
            threshold: "INFO"
            type: "file"
}
         LogStandardOut: {
            categories: {
               GeometryBadInputPoint: {
                  limit: 5
                  timespan: 1000
               }
               default: {}
}
            threshold: "WARNING"
            type: "cout"
}
}
}
   scheduler: {
      defaultExceptions: false
   }
}
source: {
   module_type: "RootInput"
}
